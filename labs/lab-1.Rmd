---
title: "Lab 1: Introduction to R and RStudio"
output: 
  html_document: 
    theme: cosmo
    toc: yes
    toc_depth: 3
    toc_float: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# suppress scientific notation
options(scipen = 999)
```

***

# Getting Started

R is a highly flexible and intuitive open-source programming language used for statistical computing. It is relatively new compared to other programmning languages, but it has an engaged following of data scientists and developers.

![](`r here::here("labs", "resources", "lab1", "other", "lab1_flow.png")` "Flow")

Only one piece of software is required to get started using the *R* programming language and, confusingly, it is also called *R*. I will refer to it here as the *R Engine*. The *R Engine* essentially allows the computer to understand the *R* programming language, turning your lines of text into computer operations. Unlike other statistics programs (e.g., SPSS, SAS), the *R Engine* is free. [Instructions for downloading the R Engine](#download_r) are below.

A second piece of software that is not required to use R but is nonetheless useful is [RStudio](https://www.rstudio.com). [RStudio](https://www.rstudio.com) is an *integrated development environment* (IDE) or, in potentially overly simplistic terms, a tool that makes interacting with the *R Engine* easier. [Instructions for downloading the RStudio](#download_rstudio) are below.

## Downloading the R Engine {#download_r}

1. Navigate to the webpage for the [Comprehensive R Archive Network](https://cran.r-project.org) (commonly referred to as CRAN).
1. Under "Download and Install R" click the appropriate link for your operating system. I am using a Mac, so I would click [Download R for (Mac) OS X](https://cran.r-project.org/bin/macosx/).
1. Click the link for the latest release. As of writing this, the newest package is `R 3.6.1. "Action of the Toes"` (all version nicknames are references to the [Peanuts comic strip](https://twitter.com/snoopy/status/976452382480531458)). I would click `R-3.6.1.pkg` to start the download.
1. Once the file is downloaded, click on it to open it. Your operating system should guide you through the rest of the installation process. 

*Note.* Perhaps unintuitively, the same steps are used to update the R Engine. You are simply replacing the old version of the R Engine with the new version.

## Downloading RStudio {#download_rstudio}
<!--1. Navigate to the webpage for [RStudio](https://www.rstudio.com).
1. Click [Download RStudio](https://www.rstudio.com/products/rstudio/download/).
1. Click the [Download](https://www.rstudio.com/products/rstudio/download/#download) listed under the free version. For our purposes (and, in fact, for most people's purposes) the free version is all that is needed.-->
1. Navigate to the webpage for the free version of [RStudio](https://www.rstudio.com/products/rstudio/download/#download). For our purposes (and, in fact, for most people's purposes) the free version is all that is needed. The available installers are listed at the bottom of the page under the heeader "Installers for Supported Platforms."
1. Select the installer for your operating system. Since I am using a Mac, I would click `RStudio 1.2.1335 - macOS 10.12+ (64-bit)`.
1. Once the file is downloaded, click on it to open it. Your operating system should guide you through the rest of the installation process. 

*Note.* To update [RStudio](https://www.rstudio.com) after it is already installed, all you have to do is navigate to `Help > Check for Updates` in the menubar. 

***

# Features of RStudio

As shown in the image below, an [RStudio](https://www.rstudio.com) session is split into four sections called panes: [the source pane](#rstudio_source), [the console](#rstudio_console), [the environment/history pane](#rstudio_environment), and the succinctly named [files/plots/packages/help pane](#rstudio_files).

![](`r here::here("labs", "resources", "lab1", "rstudio", "lab1_rstudio_4panel.jpg")` "Four Panes of RStudio")

## The Console {#rstudio_console}

In RStudio, the console is the access point to the underlying R-engine. It evaluates the code you provide it (including code called using the [the source pane](#rstudio_source)). You can pass commands to the R-engine by typing in commands after the `>`.

![](`r here::here("labs", "resources", "lab1", "rstudio", "lab1_rstudio_console.png")` "RStudio Console Pane")

## Source {#rstudio_source}

The source pane shows you a collection of code called a script. In R, we primarily work with `R Script` files (files ending in `.R`) or `R Markdown` files (files ending in `.Rmd`). In this class, we will primarily be working with `R Markdown` files. The document you are reading right now was made with `R Markdown`.

![](`r here::here("labs", "resources", "lab1", "rstudio", "lab1_rstudio_source.png")` "RStudio Source Pane")

## Environment/History {#rstudio_environment}

The environment and history pane shows, well, your environment and history. Specifically, if you have the "Environment" tab selected, you will see a list of all the variables that exist in your work environment. If you have the "History" tab selected, you will see previous commands that you passed to the console. 

![](`r here::here("labs", "resources", "lab1", "rstudio", "lab1_rstudio_environment.png")` "RStudio Environment Pane")

## Files/Plots/Packages/Help {#rstudio_files}
The final pane, the files/plots/packages/help pane, includes a number of helpful tabs. The "Files" tab shows you the files in your current working directory, the "Plots" tab shows you a preview of any plots you have created, the "Packages" tab shows you a list of the packages currently installed on your computer, and the "Help" tab is where help documentation will appear. We will discuss packages and help documentation later in this lab.

![](`r here::here("labs", "resources", "lab1", "rstudio", "lab1_rstudio_files.png")` "RStudio Files Pane")

***

# R Markdown

As noted above, you will mostly be using `R Markdown` documents in this course. 

## Creating an R Markdown Document

(@) Click on the blank piece of paper with the plus sign over it in the upper left-hand side of RStudio.

(@) Click on `R Markdown...`.

```{r, echo = FALSE, out.width = "250px", fig.align="center"}
knitr::include_graphics(here::here("labs", "resources", "lab1", "rmarkdown", "lab1_menu_an.png"))
```

(@) Enter the title of document and your name. For the purposes of this example, I have chosen to title the document `lab_1` and I have chosen--for the 9,701st day in a row--to name myself `Cameron`.

<center>
![](`r here::here("labs", "resources", "lab1", "rmarkdown", "lab1_doc_pref.png")` "R Markdown Document Preferences")
</center>

Congratulations! You now have an `R Markdown` document!

## Using an R Markdown Document

The content of `R Markdown` documents is split into main types: text and R code. Text will not be evaluated by the computer other than to be formatted according to the markdown syntax. If you answering a question or interpreting some results for your homeworks you will be using text.

Code will be shown in the R Code chunks. R code chunks are surround by ` ```{r} ` and ` ``` `. The code chunks are evaluated by the computer. 

<center>
![](`r here::here("labs", "resources", "lab1", "rmarkdown", "lab1_raw.png")` "R Markdown Document Preferences")
</center>

## Knitting an R Markdown Document

In order to knit (i.e., evaluate) an R Markdown document, either click `command + shift + k` or click the button at the top of the R Markdown document that says `Knit` with a role of yarn beside it. 

There should be a new document wherever you saved your `R Markdown` document. The new document will end in `.html`. The knitted version of the `R Mardown 

<center>
![](`r here::here("labs", "resources", "lab1", "rmarkdown", "lab1_knit.png")` "R Markdown Document Preferences")
</center>

***

# The Basics of Coding in R

## Arithmetic commands

As mentioned above, you can pass commands to the R-engine via the console. R has arithmetic commands for doing basic math operations, including addition (`+`), subtraction (`-`), multiplication (`*`), division (`/`), and exponentiation (`^`).

```{r, echo = FALSE, out.width = "175px"}
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_addition.png"))
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_subtraction.png"))
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_multiplication.png"))
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_division.png"))
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_exponentiation.png"))
```

Parentheses can be used to tell R what parts of the equation should be evaluated first. As shown below (and as expected), `(10 + 5) * 2` does not equal `10 + 5 * 2`.

```{r, echo = FALSE, out.width = "175px"}
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_paren.png"))
knitr::include_graphics(here::here("labs", "resources", "lab1", "arithmetic", "lab1_noparen.png"))
```

## Creating Variables

You can create variables using the assignment operator (`<-`). Whatever is on the left of the assignment operator is saved to name specified on the right of the assignment operator. For example, if we wanted to save `10` to a variable called `my_number` we would write:

```{r}
my_number <- 10
```

If we want to see what is stored in `my_number`, we can simply type `my_number` into the console and press `enter`.

```{r}
my_number
```

If we want to overwrite `my_number` with a new value, we simply assign a new value to `my_number`.

```{r}
my_number <- 20
```

Looking at `my_number` again, we can see that it is now `20`.

```{r}
my_number
```

You can treat variables (e.g., `my_number`) just like you would the underlying values. For example, you could add `5` to my number.

```{r}
my_number + 5
```

Keep in mind, the above operation does not save the result of `my_number + 5` to `my_number`. To do that, you would have to assign the result of `my_number + 5` to `my_number`.

```{r}
my_number <- my_number + 5

my_number
```

If we want to remove a variable from our environment, we can use `rm()`.

```{r}
rm(my_number)
```

### Types of Variables

If a variable only has one value associated with it, we call it a `scalar`. As shown below, there are four types of values: (1) `logical` values (also called `booleans`) that can be either `TRUE` or `FALSE`, (2) `integer` values, which are denoted by the suffix `L` and are whole numbers (i.e., numbers without decimal values), (3) `doubles` are numbers that include values before and after the decimal point (most `numeric` values in R default to doubles), and (4) `character` values (also called `strings`), which are pieces of text enclosed in quotation marks (`"`).

| Type            | Examples             |
|-----------------|----------------------|   
| Logical/Boolean |    `TRUE`,   `FALSE` |
| Integer         |     `10L`,    `-10L` |
| Double          |   `10.50`,  `-10.50` |
| Character       | `"Hello"`, `"World"` |

### Vectors

A collection of values is called a `vector` (sometimes called `arrays` in other languages). In R, we use the `c()` command to concatenate (combine) values. Just as we did with the `scalar` values above, we can assign a vector to a variable.

```{r}
my_vector <- c(10, 20, 20, 40, 50, 60)
```

To print out the entire vector, we can simply type `my_vector` into the console.

```{r}
my_vector
```

In order to select just one value from the vector, we use square brackets (`[]`). For example, if we wanted the third value from `my_vector` we would type `my_vector[3]`^[1](#foot_vector)^. 

```{r}
my_vector[3]
```

If we want to replace a specific value in a vector, we use the assignment operator in conjunction with the square brackets.

```{r}
my_vector[3] <- 30

my_vector
```

You can perform arithmetic operations on vectors, but the behaviour is not identical to single values. If the vectors are the same length each value from one vector will be paired with the corresponding value from the other vector. See below for an example of this in action.

```{r}
my_vector

my_vector_2 <- c(1, 2, 3, 4, 5, 6)

my_vector_2

my_vector + my_vector_2
```

If the vectors of different lengths, the shorter vector will be recycled (i.e., repeated) to be the same length as the longer vector.

```{r}
my_vector

my_vector_3 <- c(1000, 2000)

my_vector_3

my_vector + my_vector_3
```

If the vectors are of different lengths and the longer vector is not a multiple of the shorter vector, R will still recycle the shorter vector, but you will get a warning.

```{r}
my_vector

my_vector_4 <- c(1000, 2000, 3000, 4000)

my_vector_4

my_vector + my_vector_4
```

***

###### 1. Unlike most other coding languages (e.g., python), indices in R start at `1` instead of `0`. For instance, if you want to select the first element of a vector, you write `my_vector[1]` instead of `my_vector[0]`. A second difference to keep in mind is that, in R, `-` will remove the value matching that index value from the vector rather than counting back from the end of the string. By way of illustration, if your vector was `c(10, 20, 30, 40, 50, 60)` using `vector[-2]` in R would return `c(10, 30, 40, 50, 60)` and in python it would return `50`. {#foot_vector} 

## Functions

Functions are essentially pre-packaged snippets of code that make your life easier. A function takes input (called arguments) and returns output (called values). For example, `length()` function takes a vector as its sole argument and returns the length of the vector as its output. 

```{r}
length(my_vector)
```

A second example is `mean()`, which takes a numeric vector as one of its arguments and returns the average of that fector as its output.

```{r}
mean(c(10, 20, 30, 40, 50, 60))
```

## Comments

Comments are pieces of text that are not interpreted by the computer. They are mostly used as a way to remind yourself what your code is doing or why you did something a certain way. In R we use the octothorp/pound-sign/hashmark/hashtag at the beginning of the line to denote a comment. In the example below, the first and third line of code would not not be evaluated while the second and fourth line would be.

```{r}
# 1 + 1
2 + 2
# 3 + 3
4 + 4
```

## Help Documentation

Sometimes when working in R you will want to know more about a function. For example, you might want to know what arguments the function `sd` takes. You can use `?` at the beginning of any function call to display the help documentation.

```{r, eval = FALSE}
?sd
```

![](`r here::here("labs", "resources", "lab1", "lab1_help.png")` "Help Documentation")

From the help documentation we can see that `sd` takes two arguments: (1) An R object and (2) a `TRUE` or `FALSE` statement indicating whether `NA`s (unknown values) should be removed from the dataset.

The help documentation for a function also often includes an example of how to use the function and details on what the output will be.

***

## Packages

A `package` is collection of code, documentation for that code, and, potentially data. 

![](`r here::here("labs", "resources", "lab1", "packages", "psych_toolbox_2.png")` "RStudio Source Pane")

A helpful way to think of packages is as a toolbox full of data analysis tools (e.g., functions). There are general purpose toolboxes that contain tools for running common analyses in psychology (e.g., `psych`), toolboxes for helping your run advanced statistical models (e.g., `lavaan`; `lmer`), toolboxes for text mining (e.g., `tidytext`), and toolboxes for plotting (e.g., `ggplot2`, `gganimate`). If you have a problem that needs to be solved, there will probably be a package for it. 


### Installing a package

To install a package onto your computer, you simply pass the name of the package to `install.packages()`. As a demonstration, we install the the `yarrr` package below. 

```{r, eval = FALSE}
install.packages("yarrr")
```

*Note.* When installing packages, the package name must be enclosed in quotes: `install.packages("yarrr")` **NOT** `install.packages(yarrr)`.

### Loading a package

Just because we've installed a package to our computer doesn't mean we have access to its functions. We need to explicitely tell R that we want access to the functions. You only need to do this once per R session. 

To load the `yarrr` package and make its tools available to us, we use `library()`.

```{r}
library(yarrr)
```

*Note.* A package can be loaded with or without quotes: `library("yarrr")` **OR** `library(yarrr)`.

### Try `yarrr` commands

Now that we have installed and loaded the `yarrr` package, let's try out of some its commands (adapted from [__YaRrr: A Pirate's Guide to R__](https://bookdown.org/ndphillips/YaRrr/)).

```{r}
# we can look at the documentation for the pirates dataset
?pirates

# we can look at the first six rows of the dataset
head(pirates)

# we can calculate the mean age of the pirates in the dataset
mean(pirates$age)
# the maximum age
max(pirates$age)
# and create a count table of the pirates' genders
table(pirates$sex)

# we can make a scatterplot with the pirates' height on the x-axis and the pirates' weight on the y-axis
plot(pirates$height, pirates$weight)

# we can customize that plot
plot(x = pirates$height, y = pirates$weight, 
     main = "Look, Ma! A scatterplot!",
     xlab = "Height (in cm)",
     ylab = "Weight (in cm)",
     pch = 16, 
     col = gray(.0, .1))

# we can make violin plots looking comparing the ages of the pirates across their swords of choice
pirateplot(formula = age ~ sword.type,
           data = pirates, 
           main = "Pirateplot of age by favorite sword")

# we can run a t-test comparing the mean age of pirates with a headband and the mean age of pirates without a headband
t.test(formula = age ~ headband, 
       data = pirates, 
       alternative = "two.sided")

# we can construct a linear model predicting the number of tattoos a pirate has from their sword of choice
tat.sword.lm <- lm(formula = tattoos ~ sword.type,
                   data = pirates)

# and we can conducted an analysis of variance looking at whether the number of tattoos differs by their sword of choice
anova(tat.sword.lm)
```

***

# Minihacks

## Minihack 1: R Markdown

Create an `R Markdown` document call `lab1_minihacks`.

## Minihack 2: Arithmetic Commands

Use R to solve for $x$: $$x = \frac{(102 + 68) \times (3 + 2) + 1250}{50}$$

## Minihack 3: Creating Variables

## Minihack 4: Loading and installing packages

Install and load the `Hmisc` packages. 

Use the `capitalize()` function in the `Hmisc` package to capitalize the vector of character scalars you made in Minihack 2.

## Minihack 5: Using functions

## Minihack 6: Accessing help documentation

Use the help documentation to learn how many arguments the function `unique` accepts. 
