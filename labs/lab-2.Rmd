---
title: "Lab 2: R Basics and Descriptives"
output: 
  html_document: 
    theme: cosmo
    toc: yes
    toc_depth: 3
    toc_float: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# suppress scientific notation
options(scipen = 999)

# load libraries
library(tidyverse)
library(here)
library(rio)
library(psych)
```


# Purpose

The purpose of today's lab is to introduce you to some simple tools that will allow you to calculate and visualize **descriptive statistics** in R. This will not be a deep dive into the theoretical meaning behind descriptives, but rather a guide to some practical steps toward getting the most basic summary information out of a given dataset. Along the way, we will implement some of the skills we learned in [last week's lab](https://uopsych.github.io/psy611/labs/lab-1.html){target="_blank"}, such as creating variables, working with data frames, installing packages, and learning how to use new functions. 

Today's lab will cover:

1. [Distributions](#dist)
2. [Basic Descriptives](#basic)
3. [Summarizing a dataset](#summarize)
4. [Bivariate descriptives](#bivar)

***

# Getting Started

We'll use the same 2015 World Happiness Report dataset from class, which you can [download here](https://drive.google.com/uc?export=download&id=1XXsB4L4wDxGkcc-JuVnotKWCnsDUsskW). If you'd like to follow along, go ahead and import the data using the `rio` package (see [here](https://uopsych.github.io/psy611/labs/lab-1.html#importing_data_into_r){target="_blank"} for a refresher on importing data.)

If the file is saved in your `Downloads` folder, your code might look something like this:
```{r, eval = FALSE}
library(rio) # use install.packages("rio") if the 'rio' package is not already installed
world_happiness <- import("~/Downloads/world_happiness_2015.csv")
```


```{r, echo=FALSE}
world_happiness = import(here("/labs/resources/lab2/purpose/world_happiness_2015.csv"))
```

We can take a peek at the data using the `str()` function, which shows us the structure of the dataset. This tells us we have a data frame with 136 observations of 8 different variables: `Country`, `Happiness`, `GDP`, `Support`, `Life`, `Freedom`, `Generosity` and `Corruption`. 

```{r}
str(world_happiness)
```

We can also peek at the first few rows of the data frame using `head()`.

```{r}
head(world_happiness)
```

***

# Distributions {#dist}

Recall from lecture that a **distribution** often refers to a description of the (relative) number of times a given variable will take each of its unique values.

We often visualize a distribution of a given variable using a histogram, which plots the frequencies of different values. 

For example, let's take a look at a distribution of the `Happiness` variable. We do this using the `hist()` function. (Remember, you can check out the help documentation using `?hist`).

```{r}
hist(x = world_happiness$Happiness)
```

This looks ok, but it's kind of ugly. Let's make it better by adding our own title and a better label for the x-axis. We can also change the number of bars using the `breaks` argument. 

```{r}
hist(x = world_happiness$Happiness, breaks = 30, main = "Distribution of Happiness Scores", xlab = "Happiness")
```

## Looking ahead...

Our second plot looks a little cleaner. So far we have been plotting in base R. However, the [ggplot2 package](https://www.rdocumentation.org/packages/ggplot2/versions/3.2.1){target="_blank"} is generally a much better tool for plotting. For now we'll stick with base plotting, but in a future class you will learn how to use `ggplot` to make better-looking plots, such as this:

```{r echo = FALSE}
ggplot(world_happiness, aes(x = Happiness)) +
  geom_histogram(fill = "#56B4E9",
                 color = "white",
                 alpha = 0.7,
                 bins = 30) + 
  labs(x = "Happiness",
       y = "Frequency",
       title = "Distribution of Happiness Scores",
       caption = "Source: 2015 World Happiness Report") +
  theme_minimal(base_size = 13)
```


Ok, so now that we know how to vizualize a basic distribution, let's think about how we commonly *characterize* distributions with descriptive statistics...

***

# Basic Descriptives {#basic}

The most basic 

## Central Tendency

For a given set of observations, measures of central tendency allow us to get the "gist" of the data--e.g. they tell us about where the "average" or the "mid-point" of the data lies. Let's take a really simple example first. We'll use a simple vector as our dataset. 

```{r}
simple_vector <- c(1, 1, 1, 2, 2, 2, 2, 2, 3, 5, 5, 6, 7)
```

### Mean

The mean is the arithmetic average of a set of values. It represents the sum of those values divided by the total number of values. Let's do this in R.

```{r}
sum(simple_vector)/length(simple_vector)
```

However, a faster (and better) way to find the mean is to use the aptly named `mean()` function from base R.

```{r}
mean(simple_vector)
```

Quick aside: What happens if you try to calculate the mean when there are missing values in your data? Let's see what happens when we add a couple `NA`'s to our simple vector and calculate the mean.

```{r}
simple_vector_missing <- c(1, 1, NA, 1, 2, 2, 2, 2, 2, 3, 5, NA, 5, 6, 7)

mean(simple_vector_missing)
```

It gives us an `NA`! The reason for this is that the mean, by its nature, involves using every value for a given variable, so if you don't remove (or impute) the missing values before getting the mean, it won't work. If there are missing values in your data (which there often are in real life), then you will have to add an additional argument: `na.rm = TRUE`.

```{r}
mean(simple_vector_missing, na.rm = TRUE)
```


### Median

The median is the middle value of a set of observations: 50% of the data points fall below the median, and 50% fall above. To find the median, we can use the `median()` function from the `{stats}` package.

```{r}
median(simple_vector)
```

### Mode

Oddly enough, the core packages in R do not contain a function to find the mode. In the case of our very simple dataset, it is easy to determine that the mode (i.e. the most common value) is `2`. Your first [minihack exercise](#minihacks) will be to find the mode of a set of numbers using the R package that accompanies your textbook.

## Variability

### Range

### IQR

### Variance and standard deviation

## Outliers

### z-scores

*** 

# Summarizing data {#summarize}

## `psych::describe()`

## Skew and kurtosis

***

# Standardization

***

# Bivariate descriptives {#bivar}

## Covariance 

## Correlation

***

# Minihacks {#minihacks}

## Minihack 1: Find the mode

## Minihack 2: Outliers

## Minihack 3: 

## Minihack 4:
